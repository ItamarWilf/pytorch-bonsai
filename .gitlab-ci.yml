image: pytorch/pytorch:1.1.0-cuda10.0-cudnn7.5-devel

tests:
  stage: test
  script:
    - pip install -r requirements.txt
    - echo "Running unit testsâ€¦"
    - cd tests/
    - coverage run --source=. -m pytest -v -s
    - coverage report
 # This regex will pull out the line coverage from the coverage report output so it will be displayed in the job page on Gitlab.
  coverage: '/^TOTAL.*\s+(\d+\%)$/'
